<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crankiness Meter</title>
  <style>
    :root { --bg:#f6f1e6; --ink:#111; }
    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
    }
    .wrap{ width:min(900px,100%); display:grid; gap:16px; justify-items:center; }
    h1{
      margin:0;
      font-weight:900;
      letter-spacing:.04em;
      text-transform:uppercase;
      font-size:clamp(22px,4vw,42px);
    }
    .card{
      width:100%;
      background: rgba(255,255,255,.35);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
    }
    svg{ width:100%; height:auto; display:block; }
    .rim{ stroke:#111; stroke-width:10; fill:none; }
    .seg{ stroke:#111; stroke-width:6; }
    .label{
      font-weight: 950;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      fill:#111;
    }
    .needle{
      transform-origin: 450px 540px;
      transition: transform 320ms cubic-bezier(.2,.8,.2,1);
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.25));
    }

    .row{ display:grid; gap:12px; margin-top:10px; }
    .meter-readout{
      font-weight: 900;
      font-size: 18px;
      display:flex;
      justify-content: space-between;
      gap:10px;
      flex-wrap: wrap;
    }
    input[type="range"]{ width:100%; }
    .btns{ display:flex; flex-wrap:wrap; gap:8px; }
    button{
      border: 1px solid rgba(0,0,0,.15);
      background: rgba(255,255,255,.75);
      padding: 8px 10px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 800;
    }
    button:hover{ filter: brightness(.98); }
    .note{ font-size:12px; opacity:.75; line-height:1.35; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Crankiness Meter</h1>

    <div class="card">
      <svg viewBox="0 0 900 600" aria-label="Crankiness meter">
        <!-- outer rim -->
        <path class="rim" d="M 90 540 A 360 360 0 0 1 810 540" />

        <!-- segments (6 equal slices across -180..0 degrees) -->
        <path class="seg" fill="#4f7a3f" d="M 90 540 A 360 360 0 0 1 138.23 356.33 L 284.64 423.14 A 170 170 0 0 0 260.09 516.90 Z" />
        <path class="seg" fill="#86a95b" d="M 138.23 356.33 A 360 360 0 0 1 266.76 240.32 L 354.53 385.83 A 170 170 0 0 0 284.64 423.14 Z" />
        <path class="seg" fill="#f2b037" d="M 266.76 240.32 A 360 360 0 0 1 450 180 L 450 350 A 170 170 0 0 0 354.53 385.83 Z" />
        <path class="seg" fill="#ee8f2e" d="M 450 180 A 360 360 0 0 1 633.24 240.32 L 545.47 385.83 A 170 170 0 0 0 450 350 Z" />
        <path class="seg" fill="#d5672d" d="M 633.24 240.32 A 360 360 0 0 1 761.77 356.33 L 615.36 423.14 A 170 170 0 0 0 545.47 385.83 Z" />
        <path class="seg" fill="#b64a36" d="M 761.77 356.33 A 360 360 0 0 1 810 540 L 639.91 516.90 A 170 170 0 0 0 615.36 423.14 Z" />

        <!-- inner cutout -->
        <path d="M 280 540 A 170 170 0 0 1 620 540 L 620 600 L 280 600 Z" fill="var(--bg)"/>

        <!-- label arcs (invisible paths) -->
        <defs>
          <!-- arcs hug the outer rim; tweak endpoints if you want more spacing -->
          <path id="a1" d="M 118 515 A 335 335 0 0 1 185 395" />
          <path id="a2" d="M 205 380 A 335 335 0 0 1 315 275" />
          <path id="a3" d="M 335 265 A 335 335 0 0 1 450 215" />
          <path id="a4" d="M 450 215 A 335 335 0 0 1 565 265" />
          <path id="a5" d="M 585 275 A 335 335 0 0 1 695 380" />
          <path id="a6" d="M 715 395 A 335 335 0 0 1 782 515" />
        </defs>

        <!-- arc-following labels -->
        <text class="label" font-size="30">
          <textPath href="#a1" startOffset="50%" text-anchor="middle">SARCASTIC</textPath>
        </text>
        <text class="label" font-size="30">
          <textPath href="#a2" startOffset="50%" text-anchor="middle">IRRITABLE</textPath>
        </text>
        <text class="label" font-size="30">
          <textPath href="#a3" startOffset="50%" text-anchor="middle">CYNICAL</textPath>
        </text>
        <text class="label" font-size="30">
          <textPath href="#a4" startOffset="50%" text-anchor="middle">BITTER</textPath>
        </text>
        <text class="label" font-size="30">
          <textPath href="#a5" startOffset="50%" text-anchor="middle">DISGUSTED</textPath>
        </text>
        <text class="label" font-size="30">
          <textPath href="#a6" startOffset="50%" text-anchor="middle">HATEFUL</textPath>
        </text>

        <!-- needle -->
        <g id="needle" class="needle">
          <path d="M 450 540 L 770 405 L 740 445 Z" fill="#111"/>
          <circle cx="450" cy="540" r="40" fill="#111"/>
          <circle cx="450" cy="540" r="18" fill="#2a2a2a"/>
        </g>
      </svg>

      <div class="row">
        <div class="meter-readout">
          <div>Level: <span id="labelOut">â€”</span></div>
          <div>Value: <span id="valueOut">0.000</span></div>
        </div>

        <input id="slider" type="range" min="0" max="1" value="0.2" step="0.001" />

        <div class="btns">
          <button data-v="0.05">Sarcastic</button>
          <button data-v="0.22">Irritable</button>
          <button data-v="0.40">Cynical</button>
          <button data-v="0.58">Bitter</button>
          <button data-v="0.76">Disgusted</button>
          <button data-v="0.95">Hateful</button>
        </div>

        <div class="note">
          Tip: add <code>?v=0.72</code> to the URL to pre-set the needle.
        </div>
      </div>
    </div>
  </div>

  <script>
    const needle = document.getElementById("needle");
    const slider = document.getElementById("slider");
    const labelOut = document.getElementById("labelOut");
    const valueOut = document.getElementById("valueOut");

    // Map 0..1 to -180..0 degrees (left to right)
    const valueToDeg = (v) => (-180 + (180 * v));

    const bands = [
      { name: "Sarcastic",  max: 1/6 },
      { name: "Irritable",  max: 2/6 },
      { name: "Cynical",    max: 3/6 },
      { name: "Bitter",    max: 4/6 },
      { name: "Disgusted", max: 5/6 },
      { name: "Hateful",   max: 1.000001 },
    ];

    function bandName(v){
      return (bands.find(b => v < b.max) || bands[bands.length-1]).name;
    }

    function setValue(v, updateUrl=false){
      v = Math.max(0, Math.min(1, Number(v)));
      slider.value = v;

      const deg = valueToDeg(v);
      needle.style.transform = `rotate(${deg}deg)`;

      labelOut.textContent = bandName(v);
      valueOut.textContent = v.toFixed(3);

      if (updateUrl) {
        const url = new URL(window.location.href);
        url.searchParams.set("v", v.toFixed(3));
        history.replaceState(null, "", url.toString());
      }
    }

    slider.addEventListener("input", (e) => setValue(e.target.value, true));
    document.querySelectorAll("button[data-v]").forEach(btn => {
      btn.addEventListener("click", () => setValue(btn.dataset.v, true));
    });

    // URL param support: ?v=0.72
    const params = new URLSearchParams(location.search);
    if (params.has("v")) setValue(params.get("v"), false);
    else setValue(slider.value, false);
  </script>
</body>
</html>
