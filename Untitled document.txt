<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crankiness Meter</title>
  <style>
    :root { --bg:#f6f1e6; --ink:#1b1b1b; }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
      display: grid;
      place-items: center;
      min-height: 100vh;
      padding: 24px;
    }
    .wrap {
      width: min(900px, 100%);
      display: grid;
      gap: 18px;
      justify-items: center;
    }
    h1 {
      margin: 0;
      font-weight: 900;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: clamp(22px, 4vw, 42px);
    }
    .card {
      width: 100%;
      background: rgba(255,255,255,0.35);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.06);
    }
    .row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      align-items: center;
    }
    .controls {
      display: grid;
      gap: 10px;
    }
    .meter-readout {
      font-weight: 800;
      font-size: 18px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    input[type="range"] { width: 100%; }
    .btns {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    button {
      border: 1px solid rgba(0,0,0,0.15);
      background: rgba(255,255,255,0.7);
      padding: 8px 10px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
    }
    button:hover { filter: brightness(0.98); }
    .note {
      font-size: 12px;
      opacity: 0.75;
      line-height: 1.35;
    }


    /* SVG */
    svg { width: 100%; height: auto; display:block; }
    .seg { stroke: #111; stroke-width: 6; }
    .label {
      font-weight: 900;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      fill: #111;
    }
    .needle {
      transform-origin: 450px 540px; /* pivot point */
      transition: transform 320ms cubic-bezier(.2,.8,.2,1);
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.25));
    }
    .rim { stroke: #111; stroke-width: 10; fill: none; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Crankiness Meter</h1>


    <div class="card">
      <!--
        ViewBox coordinate system: 0..900 wide, 0..600 tall
        Gauge: semicircle centered at (450,540) radius 360
      -->
      <svg viewBox="0 0 900 600" aria-label="Crankiness meter">
        <!-- outer rim -->
        <path class="rim" d="M 90 540 A 360 360 0 0 1 810 540" />


        <!-- segments (6 equal slices across -180..0 degrees) -->
        <!-- Each slice is drawn as a "ring wedge": outer arc radius 360, inner arc radius 170 -->
        <!-- Colors roughly match your image -->
        <path class="seg" fill="#4f7a3f" d="M 90 540 A 360 360 0 0 1 138.23 356.33 L 284.64 423.14 A 170 170 0 0 0 260.09 516.90 Z" />
        <path class="seg" fill="#86a95b" d="M 138.23 356.33 A 360 360 0 0 1 266.76 240.32 L 354.53 385.83 A 170 170 0 0 0 284.64 423.14 Z" />
        <path class="seg" fill="#f2b037" d="M 266.76 240.32 A 360 360 0 0 1 450 180 L 450 350 A 170 170 0 0 0 354.53 385.83 Z" />
        <path class="seg" fill="#ee8f2e" d="M 450 180 A 360 360 0 0 1 633.24 240.32 L 545.47 385.83 A 170 170 0 0 0 450 350 Z" />
        <path class="seg" fill="#d5672d" d="M 633.24 240.32 A 360 360 0 0 1 761.77 356.33 L 615.36 423.14 A 170 170 0 0 0 545.47 385.83 Z" />
        <path class="seg" fill="#b64a36" d="M 761.77 356.33 A 360 360 0 0 1 810 540 L 639.91 516.90 A 170 170 0 0 0 615.36 423.14 Z" />


        <!-- inner cutout (to make it look like a ring) -->
        <path d="M 280 540 A 170 170 0 0 1 620 540 L 620 600 L 280 600 Z" fill="var(--bg)"/>


        <!-- labels (positioned by eye) -->
        <text class="label" x="180" y="500" font-size="36" transform="rotate(-35 180 500)">Sarcastic</text>
        <text class="label" x="255" y="385" font-size="34" transform="rotate(-55 255 385)">Irritable</text>
        <text class="label" x="375" y="300" font-size="34" transform="rotate(-78 375 300)">Cynical</text>
        <text class="label" x="505" y="290" font-size="34" transform="rotate(-10 505 290)">Bitter</text>
        <text class="label" x="635" y="355" font-size="34" transform="rotate(-30 635 355)">Disgusted</text>
        <text class="label" x="670" y="500" font-size="36">Hateful</text>


        <!-- needle group -->
        <g id="needle" class="needle">
          <!-- pointer -->
          <path d="M 450 540 L 770 405 L 740 445 Z" fill="#111"/>
          <!-- hub -->
          <circle cx="450" cy="540" r="40" fill="#111"/>
          <circle cx="450" cy="540" r="18" fill="#2a2a2a"/>
        </g>
      </svg>


      <div class="row">
        <div class="meter-readout">
          <div>Level: <span id="label">—</span></div>
          <div>Value: <span id="value">0.00</span></div>
        </div>


        <div class="controls">
          <input id="slider" type="range" min="0" max="1" value="0.2" step="0.001" />
          <div class="btns">
            <button data-v="0.05">Sarcastic</button>
            <button data-v="0.22">Irritable</button>
            <button data-v="0.40">Cynical</button>
            <button data-v="0.58">Bitter</button>
            <button data-v="0.76">Disgusted</button>
            <button data-v="0.95">Hateful</button>
          </div>
          <div class="note">
            Tip: add <code>?v=0.72</code> to the URL to pre-set the needle.
          </div>
        </div>
      </div>
    </div>
  </div>


  <script>
    const needle = document.getElementById("needle");
    const slider = document.getElementById("slider");
    const outLabel = document.getElementById("label");
    const outValue = document.getElementById("value");


    // Map 0..1 to -180..0 degrees (left to right)
    const valueToDeg = (v) => (-180 + (180 * v));


    const bands = [
      { name: "Sarcastic",  max: 1/6 },
      { name: "Irritable",  max: 2/6 },
      { name: "Cynical",    max: 3/6 },
      { name: "Bitter",    max: 4/6 },
      { name: "Disgusted", max: 5/6 },
      { name: "Hateful",   max: 1.000001 },
    ];


    function bandName(v){
      return (bands.find(b => v < b.max) || bands[bands.length-1]).name;
    }


    function setValue(v, pushUrl=false){
      v = Math.max(0, Math.min(1, Number(v)));
      slider.value = v;
      const deg = valueToDeg(v);
      needle.style.transform = `rotate(${deg}deg)`;
      outLabel.textContent = bandName(v);
      outValue.textContent = v.toFixed(3);


      if (pushUrl) {
        const url = new URL(window.location.href);
        url.searchParams.set("v", v.toFixed(3));
        history.replaceState(null, "", url.toString());
      }
    }


    slider.addEventListener("input", (e) => setValue(e.target.value, true));


    document.querySelectorAll("button[data-v]").forEach(btn => {
      btn.addEventListener("click", () => setValue(btn.dataset.v, true));
    });


    // URL param support: ?v=0.72
    const params = new URLSearchParams(location.search);
    if (params.has("v")) setValue(params.get("v"), false);
    else setValue(slider.value, false);
  </script>
</body>
</html>